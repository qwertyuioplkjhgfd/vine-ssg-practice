# state 2 is overworld
# ow chest splits

function vinedp:timer1t/formattimer
function vinedp:timer1t/formatsplit

execute if score @s state matches 2 if score @s chestCount matches 2.. run scoreboard players add @s chestCount 1
execute if score @s state matches 2 if score @s chestCount matches 1 run execute positioned 984 94 27 as @p unless entity @s[distance=..7] run scoreboard players set @s chestCount 2
execute if score @s state matches 2 if score @s chestCount matches 0 run scoreboard players set @s chestCount 1

execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timerDecimal matches 100.. if score @p timerDecimal matches 100.. run tellraw @a ["",{"text":"Blacksmith Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"score":{"name":"ms","objective":"timerDecimal"},"color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"score":{"name":"@p","objective":"timerDecimal"},"color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timerDecimal matches 100.. if score @p timerDecimal matches 50 run tellraw @a ["",{"text":"Blacksmith Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"score":{"name":"ms","objective":"timerDecimal"},"color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"050","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timerDecimal matches 100.. if score @p timerDecimal matches 0 run tellraw @a ["",{"text":"Blacksmith Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"score":{"name":"ms","objective":"timerDecimal"},"color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"000","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timerDecimal matches 50 if score @p timerDecimal matches 100.. run tellraw @a ["",{"text":"Blacksmith Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"050","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"score":{"name":"@p","objective":"timerDecimal"},"color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timerDecimal matches 50 if score @p timerDecimal matches 50 run tellraw @a ["",{"text":"Blacksmith Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"050","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"050","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timerDecimal matches 50 if score @p timerDecimal matches 0 run tellraw @a ["",{"text":"Blacksmith Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"050","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"000","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timerDecimal matches 0 if score @p timerDecimal matches 100.. run tellraw @a ["",{"text":"Blacksmith Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"000","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"score":{"name":"@p","objective":"timerDecimal"},"color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timerDecimal matches 0 if score @p timerDecimal matches 50 run tellraw @a ["",{"text":"Blacksmith Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"000","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"050","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timerDecimal matches 0 if score @p timerDecimal matches 0 run tellraw @a ["",{"text":"Blacksmith Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"000","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"000","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
# compare to best splits
execute if score @s state matches 2 if score @s chestCount matches 1 if score @p currentSplit < @p bsChestPB run scoreboard players operation @p bsChestPB = @p currentSplit
execute if score @s state matches 2 if score @s chestCount matches 1 if score @p bsChestPB matches 0 run scoreboard players operation @p bsChestPB = @p currentSplit
# compare to best paces
execute if score @s state matches 2 if score @s chestCount matches 1 if score ms timer < @p bsChestBP run scoreboard players operation @p bsChestBP = ms timer
execute if score @s state matches 2 if score @s chestCount matches 1 if score @p bsChestBP matches 0 run scoreboard players operation @p bsChestBP = ms timer

execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timerDecimal matches 100.. if score @p timerDecimal matches 100.. run tellraw @a ["",{"text":"Flint Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"score":{"name":"ms","objective":"timerDecimal"},"color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"score":{"name":"@p","objective":"timerDecimal"},"color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timerDecimal matches 100.. if score @p timerDecimal matches 50 run tellraw @a ["",{"text":"Flint Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"score":{"name":"ms","objective":"timerDecimal"},"color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"050","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timerDecimal matches 100.. if score @p timerDecimal matches 0 run tellraw @a ["",{"text":"Flint Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"score":{"name":"ms","objective":"timerDecimal"},"color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"000","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timerDecimal matches 50 if score @p timerDecimal matches 100.. run tellraw @a ["",{"text":"Flint Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"050","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"score":{"name":"@p","objective":"timerDecimal"},"color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timerDecimal matches 50 if score @p timerDecimal matches 50 run tellraw @a ["",{"text":"Flint Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"050","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"050","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timerDecimal matches 50 if score @p timerDecimal matches 0 run tellraw @a ["",{"text":"Flint Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"050","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"000","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timerDecimal matches 0 if score @p timerDecimal matches 100.. run tellraw @a ["",{"text":"Flint Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"000","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"score":{"name":"@p","objective":"timerDecimal"},"color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timerDecimal matches 0 if score @p timerDecimal matches 50 run tellraw @a ["",{"text":"Flint Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"000","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"050","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timerDecimal matches 0 if score @p timerDecimal matches 0 run tellraw @a ["",{"text":"Flint Chest","color":"#02F8A2"},{"text":" opened at ","color":"gray"},{"score":{"name":"ms","objective":"timerInteger"},"color":"#02F8A2"},{"text":".","color":"#02F8A2"},{"text":"000","color":"#02F8A2"},{"text":" (","color":"gray"},{"score":{"name":"@p","objective":"timerInteger"},"color":"#FEC3FA"},{"text":".","color":"#FEC3FA"},{"text":"000","color":"#FEC3FA"},{"text": " split","color": "#FEC3FA"},{"text":")","color":"gray"}]
# compare to best splits
execute if score @s state matches 2 if score @s chestCount matches 2 if score @p currentSplit < @p flintChestPB run scoreboard players operation @p flintChestPB = @p currentSplit
execute if score @s state matches 2 if score @s chestCount matches 2 if score @p flintChestPB matches 0 run scoreboard players operation @p flintChestPB = @p currentSplit
# compare to best paces
execute if score @s state matches 2 if score @s chestCount matches 2 if score ms timer < @p flintChestBP run scoreboard players operation @p flintChestBP = ms timer
execute if score @s state matches 2 if score @s chestCount matches 2 if score @p flintChestBP matches 0 run scoreboard players operation @p flintChestBP = ms timer
